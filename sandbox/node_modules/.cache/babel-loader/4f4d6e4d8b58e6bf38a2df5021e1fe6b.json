{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nimport * as reactTriggerChange from \"react-trigger-change\";\nimport { WELL_KNOWN_COMMANDS, defaultTextareaMarkdownEditorOptions, isRefObject } from \"./types\";\nimport Mousetrap from \"mousetrap\";\nimport React, { Fragment, forwardRef, useCallback, useEffect, useMemo, useRef } from \"react\";\nimport { findLastIndex } from \"./utils\";\nimport { wellKnownCommands } from \"./commands\";\nvar CHILDREN_ERROR_MSG = \"TextareaMarkdownEditor: child element must be instance of HTMLTextAreaElement\";\nexport var TextareaMarkdownEditor = forwardRef(function (props, ref) {\n  var userCommands = props.commands,\n      userOptions = props.options,\n      textareaProps = __rest(props, [\"commands\", \"options\"]);\n\n  var textareaNodeRef = useRef(null);\n  useBootstrap({\n    props: props,\n    ref: ref,\n    textareaRef: textareaNodeRef\n  });\n  return React.createElement(\"textarea\", __assign({\n    ref: textareaNodeRef\n  }, textareaProps));\n});\nTextareaMarkdownEditor.Wrapper = forwardRef(function (props, ref) {\n  var children = props.children;\n  var textareaNodeRef = useRef();\n  var domHolderElementRef = useRef(null);\n  useEffect(function () {\n    if (React.Children.count(children) !== 1) {\n      throw new TypeError(CHILDREN_ERROR_MSG);\n    }\n\n    if (children && domHolderElementRef.current && !textareaNodeRef.current) {\n      var node = domHolderElementRef.current.previousSibling;\n\n      if (node instanceof HTMLTextAreaElement) {\n        textareaNodeRef.current = node;\n      } else {\n        throw new TypeError(CHILDREN_ERROR_MSG);\n      }\n\n      domHolderElementRef.current.remove();\n    }\n  }, [children]);\n  useBootstrap({\n    props: props,\n    ref: ref,\n    textareaRef: textareaNodeRef\n  });\n  return React.createElement(Fragment, null, children, React.createElement(\"div\", {\n    style: {\n      display: \"none\"\n    },\n    ref: domHolderElementRef\n  }));\n});\n\nvar useBootstrap = function (_a) {\n  var props = _a.props,\n      ref = _a.ref,\n      textareaRef = _a.textareaRef;\n  var userCommands = props.commands,\n      userOptions = props.options;\n  var TextareaMarkdownEditorRef = ref;\n  var commands = useMemo(function () {\n    return getCommandsList(userCommands !== null && userCommands !== void 0 ? userCommands : []);\n  }, [userCommands]);\n  var options = useMemo(function () {\n    return Object.assign({}, defaultTextareaMarkdownEditorOptions, userOptions);\n  }, [userOptions]);\n  var trigger = useCallback(function (name, _a) {\n    var _b = _a.__internal,\n        element = _b.element,\n        keyEvent = _b.keyEvent;\n    return __awaiter(void 0, void 0, void 0, function () {\n      var index, command, result;\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            index = findLastIndex(commands, function (c) {\n              return c.name === name;\n            });\n            if (!element) return [2\n            /*return*/\n            ];\n\n            if (index === -1) {\n              throw new TypeError(\"Command with name \\\"\" + name + \"\\\" is not defined\");\n            }\n\n            command = commands[index];\n\n            if (command.enable === false) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            return [4\n            /*yield*/\n            , command.handler({\n              element: element,\n              keyEvent: keyEvent,\n              options: options\n            })];\n\n          case 1:\n            result = _c.sent();\n\n            if (result) {\n              element.value = result;\n              reactTriggerChange(element);\n            }\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  }, [commands, options]);\n  var refTrigger = useCallback(function (command) {\n    return trigger(command, {\n      __internal: {\n        element: textareaRef.current\n      }\n    });\n  }, [textareaRef, trigger]);\n  useEffect(function () {\n    if (isRefObject(TextareaMarkdownEditorRef) && textareaRef.current) {\n      TextareaMarkdownEditorRef.current = Object.assign(textareaRef.current, {\n        trigger: refTrigger\n      });\n    }\n  }, [textareaRef, TextareaMarkdownEditorRef, refTrigger]);\n  var mtInstanceRef = useRef();\n  useEffect(function () {\n    var _a;\n\n    if (!textareaRef.current) return;\n    (_a = mtInstanceRef.current) === null || _a === void 0 ? void 0 : _a.reset();\n    mtInstanceRef.current = Mousetrap(textareaRef.current);\n    commands.forEach(function (command) {\n      var _a;\n\n      if (command.shortcut) {\n        (_a = mtInstanceRef.current) === null || _a === void 0 ? void 0 : _a.bind(command.shortcut, function (keyEvent) {\n          if (command.shortcutPreventDefault) {\n            keyEvent.preventDefault();\n          }\n\n          trigger(command.name, {\n            __internal: {\n              element: textareaRef.current,\n              keyEvent: keyEvent\n            }\n          });\n        });\n      }\n    });\n    return function () {\n      var _a;\n\n      (_a = mtInstanceRef.current) === null || _a === void 0 ? void 0 : _a.reset();\n      mtInstanceRef.current = undefined;\n    };\n  }, [commands, textareaRef, trigger]);\n  return {\n    commands: commands,\n    options: options\n  };\n};\n\nvar getCommandsList = function (userCommands) {\n  var resultCommands = __spreadArrays(wellKnownCommands);\n\n  userCommands === null || userCommands === void 0 ? void 0 : userCommands.forEach(function (command) {\n    if (WELL_KNOWN_COMMANDS.includes(command.name)) {\n      var commandIndex = wellKnownCommands.findIndex(function (x) {\n        return x.name === command.name;\n      });\n      var overrides = {\n        name: resultCommands[commandIndex].name,\n        handler: resultCommands[commandIndex].handler,\n        enable: command.enable,\n        shortcut: command.shortcut\n      };\n      resultCommands[commandIndex] = overrides;\n    } else {\n      if (!command.handler || !(command.handler instanceof Function)) {\n        throw new TypeError(\"Custom command should have a handler function\");\n      }\n\n      resultCommands.push(command);\n    }\n  });\n  return resultCommands;\n};","map":{"version":3,"sources":["/Users/kamachekhin/code/markdown-textarea/dist/TextareaMarkdownEditor.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArrays","il","r","Array","k","a","j","jl","reactTriggerChange","WELL_KNOWN_COMMANDS","defaultTextareaMarkdownEditorOptions","isRefObject","Mousetrap","React","Fragment","forwardRef","useCallback","useEffect","useMemo","useRef","findLastIndex","wellKnownCommands","CHILDREN_ERROR_MSG","TextareaMarkdownEditor","props","ref","userCommands","commands","userOptions","options","textareaProps","textareaNodeRef","useBootstrap","textareaRef","createElement","Wrapper","children","domHolderElementRef","Children","count","current","node","previousSibling","HTMLTextAreaElement","remove","style","display","_a","TextareaMarkdownEditorRef","getCommandsList","trigger","name","_b","__internal","element","keyEvent","index","command","_c","c","enable","handler","refTrigger","mtInstanceRef","reset","forEach","shortcut","bind","shortcutPreventDefault","preventDefault","undefined","resultCommands","includes","commandIndex","findIndex","x","overrides","Function"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport * as reactTriggerChange from \"react-trigger-change\";\nimport { WELL_KNOWN_COMMANDS, defaultTextareaMarkdownEditorOptions, isRefObject, } from \"./types\";\nimport Mousetrap from \"mousetrap\";\nimport React, { Fragment, forwardRef, useCallback, useEffect, useMemo, useRef } from \"react\";\nimport { findLastIndex } from \"./utils\";\nimport { wellKnownCommands } from \"./commands\";\nvar CHILDREN_ERROR_MSG = \"TextareaMarkdownEditor: child element must be instance of HTMLTextAreaElement\";\nexport var TextareaMarkdownEditor = forwardRef(function (props, ref) {\n    var userCommands = props.commands, userOptions = props.options, textareaProps = __rest(props, [\"commands\", \"options\"]);\n    var textareaNodeRef = useRef(null);\n    useBootstrap({\n        props: props,\n        ref: ref,\n        textareaRef: textareaNodeRef,\n    });\n    return React.createElement(\"textarea\", __assign({ ref: textareaNodeRef }, textareaProps));\n});\nTextareaMarkdownEditor.Wrapper = forwardRef(function (props, ref) {\n    var children = props.children;\n    var textareaNodeRef = useRef();\n    var domHolderElementRef = useRef(null);\n    useEffect(function () {\n        if (React.Children.count(children) !== 1) {\n            throw new TypeError(CHILDREN_ERROR_MSG);\n        }\n        if (children && domHolderElementRef.current && !textareaNodeRef.current) {\n            var node = domHolderElementRef.current.previousSibling;\n            if (node instanceof HTMLTextAreaElement) {\n                textareaNodeRef.current = node;\n            }\n            else {\n                throw new TypeError(CHILDREN_ERROR_MSG);\n            }\n            domHolderElementRef.current.remove();\n        }\n    }, [children]);\n    useBootstrap({\n        props: props,\n        ref: ref,\n        textareaRef: textareaNodeRef,\n    });\n    return (React.createElement(Fragment, null,\n        children,\n        React.createElement(\"div\", { style: { display: \"none\" }, ref: domHolderElementRef })));\n});\nvar useBootstrap = function (_a) {\n    var props = _a.props, ref = _a.ref, textareaRef = _a.textareaRef;\n    var userCommands = props.commands, userOptions = props.options;\n    var TextareaMarkdownEditorRef = ref;\n    var commands = useMemo(function () { return getCommandsList(userCommands !== null && userCommands !== void 0 ? userCommands : []); }, [userCommands]);\n    var options = useMemo(function () { return Object.assign({}, defaultTextareaMarkdownEditorOptions, userOptions); }, [userOptions]);\n    var trigger = useCallback(function (name, _a) {\n        var _b = _a.__internal, element = _b.element, keyEvent = _b.keyEvent;\n        return __awaiter(void 0, void 0, void 0, function () {\n            var index, command, result;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        index = findLastIndex(commands, function (c) { return c.name === name; });\n                        if (!element)\n                            return [2 /*return*/];\n                        if (index === -1) {\n                            throw new TypeError(\"Command with name \\\"\" + name + \"\\\" is not defined\");\n                        }\n                        command = commands[index];\n                        if (command.enable === false) {\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, command.handler({ element: element, keyEvent: keyEvent, options: options })];\n                    case 1:\n                        result = _c.sent();\n                        if (result) {\n                            element.value = result;\n                            reactTriggerChange(element);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    }, [commands, options]);\n    var refTrigger = useCallback(function (command) { return trigger(command, { __internal: { element: textareaRef.current } }); }, [textareaRef, trigger]);\n    useEffect(function () {\n        if (isRefObject(TextareaMarkdownEditorRef) && textareaRef.current) {\n            TextareaMarkdownEditorRef.current = Object.assign(textareaRef.current, {\n                trigger: refTrigger,\n            });\n        }\n    }, [textareaRef, TextareaMarkdownEditorRef, refTrigger]);\n    var mtInstanceRef = useRef();\n    useEffect(function () {\n        var _a;\n        if (!textareaRef.current)\n            return;\n        (_a = mtInstanceRef.current) === null || _a === void 0 ? void 0 : _a.reset();\n        mtInstanceRef.current = Mousetrap(textareaRef.current);\n        commands.forEach(function (command) {\n            var _a;\n            if (command.shortcut) {\n                (_a = mtInstanceRef.current) === null || _a === void 0 ? void 0 : _a.bind(command.shortcut, function (keyEvent) {\n                    if (command.shortcutPreventDefault) {\n                        keyEvent.preventDefault();\n                    }\n                    trigger(command.name, { __internal: { element: textareaRef.current, keyEvent: keyEvent } });\n                });\n            }\n        });\n        return function () {\n            var _a;\n            (_a = mtInstanceRef.current) === null || _a === void 0 ? void 0 : _a.reset();\n            mtInstanceRef.current = undefined;\n        };\n    }, [commands, textareaRef, trigger]);\n    return {\n        commands: commands,\n        options: options,\n    };\n};\nvar getCommandsList = function (userCommands) {\n    var resultCommands = __spreadArrays(wellKnownCommands);\n    userCommands === null || userCommands === void 0 ? void 0 : userCommands.forEach(function (command) {\n        if (WELL_KNOWN_COMMANDS.includes(command.name)) {\n            var commandIndex = wellKnownCommands.findIndex(function (x) { return x.name === command.name; });\n            var overrides = {\n                name: resultCommands[commandIndex].name,\n                handler: resultCommands[commandIndex].handler,\n                enable: command.enable,\n                shortcut: command.shortcut,\n            };\n            resultCommands[commandIndex] = overrides;\n        }\n        else {\n            if (!command.handler || !(command.handler instanceof Function)) {\n                throw new TypeError(\"Custom command should have a handler function\");\n            }\n            resultCommands.push(command);\n        }\n    });\n    return resultCommands;\n};\n"]},"metadata":{},"sourceType":"module"}