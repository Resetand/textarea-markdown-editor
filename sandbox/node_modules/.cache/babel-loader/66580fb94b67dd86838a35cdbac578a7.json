{"ast":null,"code":"import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { useLayoutEffect, forwardRef, useRef, createElement } from 'react';\nimport useLatest from 'use-latest';\nimport useComposedRef from 'use-composed-ref';\nvar HIDDEN_TEXTAREA_STYLE = {\n  'min-height': '0',\n  'max-height': 'none',\n  height: '0',\n  visibility: 'hidden',\n  overflow: 'hidden',\n  position: 'absolute',\n  'z-index': '-1000',\n  top: '0',\n  right: '0'\n};\n\nvar forceHiddenStyles = function forceHiddenStyles(node) {\n  Object.keys(HIDDEN_TEXTAREA_STYLE).forEach(function (key) {\n    node.style.setProperty(key, HIDDEN_TEXTAREA_STYLE[key], 'important');\n  });\n}; //   export type CalculatedNodeHeights = [height: number, rowHeight: number];\n// https://github.com/microsoft/TypeScript/issues/28259\n\n\nvar hiddenTextarea = null;\n\nvar getHeight = function getHeight(node, sizingData) {\n  var height = node.scrollHeight;\n\n  if (sizingData.sizingStyle.boxSizing === 'border-box') {\n    // border-box: add border, since height = content + padding + border\n    return height + sizingData.borderSize;\n  } // remove padding, since height = content\n\n\n  return height - sizingData.paddingSize;\n};\n\nfunction calculateNodeHeight(sizingData, value, minRows, maxRows) {\n  if (minRows === void 0) {\n    minRows = 1;\n  }\n\n  if (maxRows === void 0) {\n    maxRows = Infinity;\n  }\n\n  if (!hiddenTextarea) {\n    hiddenTextarea = document.createElement('textarea');\n    hiddenTextarea.setAttribute('tab-index', '-1');\n    hiddenTextarea.setAttribute('aria-hidden', 'true');\n    forceHiddenStyles(hiddenTextarea);\n  }\n\n  if (hiddenTextarea.parentNode === null) {\n    document.body.appendChild(hiddenTextarea);\n  }\n\n  var paddingSize = sizingData.paddingSize,\n      borderSize = sizingData.borderSize,\n      sizingStyle = sizingData.sizingStyle;\n  var boxSizing = sizingStyle.boxSizing;\n  Object.keys(sizingStyle).forEach(function (_key) {\n    var key = _key;\n    hiddenTextarea.style[key] = sizingStyle[key];\n  });\n  forceHiddenStyles(hiddenTextarea);\n  hiddenTextarea.value = value;\n  var height = getHeight(hiddenTextarea, sizingData); // measure height of a textarea with a single row\n\n  hiddenTextarea.value = 'x';\n  var rowHeight = hiddenTextarea.scrollHeight - paddingSize;\n  var minHeight = rowHeight * minRows;\n\n  if (boxSizing === 'border-box') {\n    minHeight = minHeight + paddingSize + borderSize;\n  }\n\n  height = Math.max(minHeight, height);\n  var maxHeight = rowHeight * maxRows;\n\n  if (boxSizing === 'border-box') {\n    maxHeight = maxHeight + paddingSize + borderSize;\n  }\n\n  height = Math.min(maxHeight, height);\n  return [height, rowHeight];\n}\n\nvar noop = function noop() {};\n\nvar pick = function pick(props, obj) {\n  return props.reduce(function (acc, prop) {\n    acc[prop] = obj[prop];\n    return acc;\n  }, {});\n};\n\nvar SIZING_STYLE = ['borderBottomWidth', 'borderLeftWidth', 'borderRightWidth', 'borderTopWidth', 'boxSizing', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'lineHeight', 'paddingBottom', 'paddingLeft', 'paddingRight', 'paddingTop', // non-standard\n'tabSize', 'textIndent', // non-standard\n'textRendering', 'textTransform', 'width'];\nvar isIE = !!document.documentElement.currentStyle;\n\nvar getSizingData = function getSizingData(node) {\n  var style = window.getComputedStyle(node);\n\n  if (style === null) {\n    return null;\n  }\n\n  var sizingStyle = pick(SIZING_STYLE, style);\n  var boxSizing = sizingStyle.boxSizing; // probably node is detached from DOM, can't read computed dimensions\n\n  if (boxSizing === '') {\n    return null;\n  } // IE (Edge has already correct behaviour) returns content width as computed width\n  // so we need to add manually padding and border widths\n\n\n  if (isIE && boxSizing === 'border-box') {\n    sizingStyle.width = parseFloat(sizingStyle.width) + parseFloat(sizingStyle.borderRightWidth) + parseFloat(sizingStyle.borderLeftWidth) + parseFloat(sizingStyle.paddingRight) + parseFloat(sizingStyle.paddingLeft) + 'px';\n  }\n\n  var paddingSize = parseFloat(sizingStyle.paddingBottom) + parseFloat(sizingStyle.paddingTop);\n  var borderSize = parseFloat(sizingStyle.borderBottomWidth) + parseFloat(sizingStyle.borderTopWidth);\n  return {\n    sizingStyle: sizingStyle,\n    paddingSize: paddingSize,\n    borderSize: borderSize\n  };\n};\n\nvar useWindowResizeListener = function useWindowResizeListener(listener) {\n  var latestListener = useLatest(listener);\n  useLayoutEffect(function () {\n    var handler = function handler(event) {\n      latestListener.current(event);\n    };\n\n    window.addEventListener('resize', handler);\n    return function () {\n      window.removeEventListener('resize', handler);\n    };\n  }, []);\n};\n\nvar TextareaAutosize = function TextareaAutosize(_ref, userRef) {\n  var cacheMeasurements = _ref.cacheMeasurements,\n      maxRows = _ref.maxRows,\n      minRows = _ref.minRows,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? noop : _ref$onChange,\n      _ref$onHeightChange = _ref.onHeightChange,\n      onHeightChange = _ref$onHeightChange === void 0 ? noop : _ref$onHeightChange,\n      props = _objectWithoutPropertiesLoose(_ref, [\"cacheMeasurements\", \"maxRows\", \"minRows\", \"onChange\", \"onHeightChange\"]);\n\n  if (process.env.NODE_ENV !== 'production' && props.style) {\n    if ('maxHeight' in props.style) {\n      throw new Error('Using `style.maxHeight` for <TextareaAutosize/> is not supported. Please use `maxRows`.');\n    }\n\n    if ('minHeight' in props.style) {\n      throw new Error('Using `style.minHeight` for <TextareaAutosize/> is not supported. Please use `minRows`.');\n    }\n  }\n\n  var isControlled = props.value !== undefined;\n  var libRef = useRef(null);\n  var ref = useComposedRef(libRef, userRef);\n  var heightRef = useRef(0);\n  var measurementsCacheRef = useRef();\n\n  var resizeTextarea = function resizeTextarea() {\n    var node = libRef.current;\n    var nodeSizingData = cacheMeasurements && measurementsCacheRef.current ? measurementsCacheRef.current : getSizingData(node);\n\n    if (!nodeSizingData) {\n      return;\n    }\n\n    measurementsCacheRef.current = nodeSizingData;\n\n    var _calculateNodeHeight = calculateNodeHeight(nodeSizingData, node.value || node.placeholder || 'x', minRows, maxRows),\n        height = _calculateNodeHeight[0],\n        rowHeight = _calculateNodeHeight[1];\n\n    if (heightRef.current !== height) {\n      heightRef.current = height;\n      node.style.setProperty('height', height + \"px\", 'important');\n      onHeightChange(height, {\n        rowHeight: rowHeight\n      });\n    }\n  };\n\n  var handleChange = function handleChange(event) {\n    if (!isControlled) {\n      resizeTextarea();\n    }\n\n    onChange(event);\n  };\n\n  {\n    useLayoutEffect(resizeTextarea);\n    useWindowResizeListener(resizeTextarea);\n  }\n  return /*#__PURE__*/createElement(\"textarea\", _extends({}, props, {\n    onChange: handleChange,\n    ref: ref\n  }));\n};\n\nvar index = /* #__PURE__ */forwardRef(TextareaAutosize);\nexport default index;","map":{"version":3,"sources":["/Users/kamachekhin/code/markdown-textarea/sandbox/node_modules/react-textarea-autosize/dist/react-textarea-autosize.browser.esm.js"],"names":["_extends","_objectWithoutPropertiesLoose","useLayoutEffect","forwardRef","useRef","createElement","useLatest","useComposedRef","HIDDEN_TEXTAREA_STYLE","height","visibility","overflow","position","top","right","forceHiddenStyles","node","Object","keys","forEach","key","style","setProperty","hiddenTextarea","getHeight","sizingData","scrollHeight","sizingStyle","boxSizing","borderSize","paddingSize","calculateNodeHeight","value","minRows","maxRows","Infinity","document","setAttribute","parentNode","body","appendChild","_key","rowHeight","minHeight","Math","max","maxHeight","min","noop","pick","props","obj","reduce","acc","prop","SIZING_STYLE","isIE","documentElement","currentStyle","getSizingData","window","getComputedStyle","width","parseFloat","borderRightWidth","borderLeftWidth","paddingRight","paddingLeft","paddingBottom","paddingTop","borderBottomWidth","borderTopWidth","useWindowResizeListener","listener","latestListener","handler","event","current","addEventListener","removeEventListener","TextareaAutosize","_ref","userRef","cacheMeasurements","_ref$onChange","onChange","_ref$onHeightChange","onHeightChange","process","env","NODE_ENV","Error","isControlled","undefined","libRef","ref","heightRef","measurementsCacheRef","resizeTextarea","nodeSizingData","_calculateNodeHeight","placeholder","handleChange","index"],"mappings":"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","sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { useLayoutEffect, forwardRef, useRef, createElement } from 'react';\nimport useLatest from 'use-latest';\nimport useComposedRef from 'use-composed-ref';\n\nvar HIDDEN_TEXTAREA_STYLE = {\n  'min-height': '0',\n  'max-height': 'none',\n  height: '0',\n  visibility: 'hidden',\n  overflow: 'hidden',\n  position: 'absolute',\n  'z-index': '-1000',\n  top: '0',\n  right: '0'\n};\n\nvar forceHiddenStyles = function forceHiddenStyles(node) {\n  Object.keys(HIDDEN_TEXTAREA_STYLE).forEach(function (key) {\n    node.style.setProperty(key, HIDDEN_TEXTAREA_STYLE[key], 'important');\n  });\n};\n\n//   export type CalculatedNodeHeights = [height: number, rowHeight: number];\n// https://github.com/microsoft/TypeScript/issues/28259\n\nvar hiddenTextarea = null;\n\nvar getHeight = function getHeight(node, sizingData) {\n  var height = node.scrollHeight;\n\n  if (sizingData.sizingStyle.boxSizing === 'border-box') {\n    // border-box: add border, since height = content + padding + border\n    return height + sizingData.borderSize;\n  } // remove padding, since height = content\n\n\n  return height - sizingData.paddingSize;\n};\n\nfunction calculateNodeHeight(sizingData, value, minRows, maxRows) {\n  if (minRows === void 0) {\n    minRows = 1;\n  }\n\n  if (maxRows === void 0) {\n    maxRows = Infinity;\n  }\n\n  if (!hiddenTextarea) {\n    hiddenTextarea = document.createElement('textarea');\n    hiddenTextarea.setAttribute('tab-index', '-1');\n    hiddenTextarea.setAttribute('aria-hidden', 'true');\n    forceHiddenStyles(hiddenTextarea);\n  }\n\n  if (hiddenTextarea.parentNode === null) {\n    document.body.appendChild(hiddenTextarea);\n  }\n\n  var paddingSize = sizingData.paddingSize,\n      borderSize = sizingData.borderSize,\n      sizingStyle = sizingData.sizingStyle;\n  var boxSizing = sizingStyle.boxSizing;\n  Object.keys(sizingStyle).forEach(function (_key) {\n    var key = _key;\n    hiddenTextarea.style[key] = sizingStyle[key];\n  });\n  forceHiddenStyles(hiddenTextarea);\n  hiddenTextarea.value = value;\n  var height = getHeight(hiddenTextarea, sizingData); // measure height of a textarea with a single row\n\n  hiddenTextarea.value = 'x';\n  var rowHeight = hiddenTextarea.scrollHeight - paddingSize;\n  var minHeight = rowHeight * minRows;\n\n  if (boxSizing === 'border-box') {\n    minHeight = minHeight + paddingSize + borderSize;\n  }\n\n  height = Math.max(minHeight, height);\n  var maxHeight = rowHeight * maxRows;\n\n  if (boxSizing === 'border-box') {\n    maxHeight = maxHeight + paddingSize + borderSize;\n  }\n\n  height = Math.min(maxHeight, height);\n  return [height, rowHeight];\n}\n\nvar noop = function noop() {};\nvar pick = function pick(props, obj) {\n  return props.reduce(function (acc, prop) {\n    acc[prop] = obj[prop];\n    return acc;\n  }, {});\n};\n\nvar SIZING_STYLE = ['borderBottomWidth', 'borderLeftWidth', 'borderRightWidth', 'borderTopWidth', 'boxSizing', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'lineHeight', 'paddingBottom', 'paddingLeft', 'paddingRight', 'paddingTop', // non-standard\n'tabSize', 'textIndent', // non-standard\n'textRendering', 'textTransform', 'width'];\nvar isIE = !!document.documentElement.currentStyle ;\n\nvar getSizingData = function getSizingData(node) {\n  var style = window.getComputedStyle(node);\n\n  if (style === null) {\n    return null;\n  }\n\n  var sizingStyle = pick(SIZING_STYLE, style);\n  var boxSizing = sizingStyle.boxSizing; // probably node is detached from DOM, can't read computed dimensions\n\n  if (boxSizing === '') {\n    return null;\n  } // IE (Edge has already correct behaviour) returns content width as computed width\n  // so we need to add manually padding and border widths\n\n\n  if (isIE && boxSizing === 'border-box') {\n    sizingStyle.width = parseFloat(sizingStyle.width) + parseFloat(sizingStyle.borderRightWidth) + parseFloat(sizingStyle.borderLeftWidth) + parseFloat(sizingStyle.paddingRight) + parseFloat(sizingStyle.paddingLeft) + 'px';\n  }\n\n  var paddingSize = parseFloat(sizingStyle.paddingBottom) + parseFloat(sizingStyle.paddingTop);\n  var borderSize = parseFloat(sizingStyle.borderBottomWidth) + parseFloat(sizingStyle.borderTopWidth);\n  return {\n    sizingStyle: sizingStyle,\n    paddingSize: paddingSize,\n    borderSize: borderSize\n  };\n};\n\nvar useWindowResizeListener = function useWindowResizeListener(listener) {\n  var latestListener = useLatest(listener);\n  useLayoutEffect(function () {\n    var handler = function handler(event) {\n      latestListener.current(event);\n    };\n\n    window.addEventListener('resize', handler);\n    return function () {\n      window.removeEventListener('resize', handler);\n    };\n  }, []);\n};\n\nvar TextareaAutosize = function TextareaAutosize(_ref, userRef) {\n  var cacheMeasurements = _ref.cacheMeasurements,\n      maxRows = _ref.maxRows,\n      minRows = _ref.minRows,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? noop : _ref$onChange,\n      _ref$onHeightChange = _ref.onHeightChange,\n      onHeightChange = _ref$onHeightChange === void 0 ? noop : _ref$onHeightChange,\n      props = _objectWithoutPropertiesLoose(_ref, [\"cacheMeasurements\", \"maxRows\", \"minRows\", \"onChange\", \"onHeightChange\"]);\n\n  if (process.env.NODE_ENV !== 'production' && props.style) {\n    if ('maxHeight' in props.style) {\n      throw new Error('Using `style.maxHeight` for <TextareaAutosize/> is not supported. Please use `maxRows`.');\n    }\n\n    if ('minHeight' in props.style) {\n      throw new Error('Using `style.minHeight` for <TextareaAutosize/> is not supported. Please use `minRows`.');\n    }\n  }\n\n  var isControlled = props.value !== undefined;\n  var libRef = useRef(null);\n  var ref = useComposedRef(libRef, userRef);\n  var heightRef = useRef(0);\n  var measurementsCacheRef = useRef();\n\n  var resizeTextarea = function resizeTextarea() {\n    var node = libRef.current;\n    var nodeSizingData = cacheMeasurements && measurementsCacheRef.current ? measurementsCacheRef.current : getSizingData(node);\n\n    if (!nodeSizingData) {\n      return;\n    }\n\n    measurementsCacheRef.current = nodeSizingData;\n\n    var _calculateNodeHeight = calculateNodeHeight(nodeSizingData, node.value || node.placeholder || 'x', minRows, maxRows),\n        height = _calculateNodeHeight[0],\n        rowHeight = _calculateNodeHeight[1];\n\n    if (heightRef.current !== height) {\n      heightRef.current = height;\n      node.style.setProperty('height', height + \"px\", 'important');\n      onHeightChange(height, {\n        rowHeight: rowHeight\n      });\n    }\n  };\n\n  var handleChange = function handleChange(event) {\n    if (!isControlled) {\n      resizeTextarea();\n    }\n\n    onChange(event);\n  };\n\n  {\n    useLayoutEffect(resizeTextarea);\n    useWindowResizeListener(resizeTextarea);\n  }\n\n  return /*#__PURE__*/createElement(\"textarea\", _extends({}, props, {\n    onChange: handleChange,\n    ref: ref\n  }));\n};\n\nvar index = /* #__PURE__ */forwardRef(TextareaAutosize);\n\nexport default index;\n"]},"metadata":{},"sourceType":"module"}